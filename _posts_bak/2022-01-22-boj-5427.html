---
layout: post
title: BOJ 5427 불
tags: BFS
---

<div id="outline-container-orge9035db" class="outline-2">
<h2 id="orge9035db">BOJ 5427 불</h2>
<div class="outline-text-2" id="text-orge9035db">
<ul class="org-ul">
<li>BFS로 풀면 된다.</li>
</ul>
</div>
</div>

<div id="outline-container-orge24c06f" class="outline-2">
<h2 id="orge24c06f">주의사항</h2>
<div class="outline-text-2" id="text-orge24c06f">
<ol class="org-ol">
<li>F(불)은 여러개 있을 수 있다.</li>
<li>맨 가장자리에서 SG가 곧바로 나올 수 있다.</li>
</ol>
</div>
</div>

<div id="outline-container-org67b9053" class="outline-2">
<h2 id="org67b9053">코드</h2>
<div class="outline-text-2" id="text-org67b9053">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #729fcf;">#include</span> <span style="color: #ad7fa8; font-style: italic;">&lt;cstdio&gt;</span>
<span style="color: #729fcf;">#include</span> <span style="color: #ad7fa8; font-style: italic;">&lt;queue&gt;</span>
<span style="color: #729fcf;">#include</span> <span style="color: #ad7fa8; font-style: italic;">&lt;vector&gt;</span>
<span style="color: #729fcf; font-weight: bold;">using</span> <span style="color: #729fcf; font-weight: bold;">namespace</span> <span style="color: #8ae234;">std</span>;

<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">T</span>;

<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">W</span>, <span style="color: #ff6347;">H</span>;

<span style="color: #8ae234; font-weight: bold;">char</span> <span style="color: #ff6347;">a</span>[1010][1010];
<span style="color: #8ae234; font-weight: bold;">char</span> <span style="color: #ff6347;">str</span>[1010];

<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">f_vis</span>[1010][1010];
<span style="color: #8ae234; font-weight: bold;">bool</span> <span style="color: #ff6347;">vis</span>[1010][1010];

<span style="color: #729fcf; font-weight: bold;">typedef</span> <span style="color: #729fcf; font-weight: bold;">struct</span> <span style="color: #8ae234; font-weight: bold;">Node</span> {
    <span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">y</span>;
    <span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">x</span>;
    <span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">dist</span>;
} <span style="color: #8ae234; font-weight: bold;">Node</span>;

<span style="color: #8ae234; font-weight: bold;">Node</span> <span style="color: #ff6347;">sg</span>;
<span style="color: #8ae234; font-weight: bold;">vector</span> &lt;<span style="color: #8ae234; font-weight: bold;">Node</span>&gt; <span style="color: #ff6347;">fire</span>;

<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">dy</span>[4] = {1, -1, 0, 0};
<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">dx</span>[4] = {0, 0, 1, -1};

<span style="color: #8ae234; font-weight: bold;">bool</span> <span style="color: #edd400; font-weight: bold;">safe</span>(<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">y</span>, <span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">x</span>)
{
    <span style="color: #729fcf; font-weight: bold;">return</span> (0&lt;=x &amp;&amp; x&lt;W) &amp;&amp; (0&lt;=y &amp;&amp; y&lt;H); 
}

<span style="color: #8ae234; font-weight: bold;">void</span> <span style="color: #edd400; font-weight: bold;">bfs_f</span>()
{
    <span style="color: #8ae234; font-weight: bold;">queue</span>&lt;<span style="color: #8ae234; font-weight: bold;">Node</span>&gt; <span style="color: #ff6347;">q</span>;
    <span style="color: #729fcf; font-weight: bold;">for</span>(<span style="color: #729fcf; font-weight: bold;">auto</span>&amp; <span style="color: #ff6347;">o</span>: fire) {
        q.push({o.y, o.x, 0});
        f_vis[o.y][o.x] = 0;
    }

    <span style="color: #729fcf; font-weight: bold;">while</span>(!q.empty()) {
        <span style="color: #8ae234; font-weight: bold;">Node</span> <span style="color: #ff6347;">cur</span> = q.front(); q.pop();

        <span style="color: #729fcf; font-weight: bold;">for</span>(<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">i</span>=0;i&lt;4;i++) {
            <span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">ny</span> = cur.y + dy[i];
            <span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">nx</span> = cur.x + dx[i];

            <span style="color: #729fcf; font-weight: bold;">if</span> (safe(ny, nx) &amp;&amp; a[ny][nx] != <span style="color: #ad7fa8; font-style: italic;">'#'</span>) {
                <span style="color: #729fcf; font-weight: bold;">if</span> (f_vis[ny][nx] &gt; f_vis[cur.y][cur.x] + 1) {
                    f_vis[ny][nx] = f_vis[cur.y][cur.x] + 1;
                    q.push({ny,nx, 0});
                }
            }
        }
    }
}

<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #edd400; font-weight: bold;">bfs_sg</span>()
{
    <span style="color: #8ae234; font-weight: bold;">queue</span>&lt;<span style="color: #8ae234; font-weight: bold;">Node</span>&gt; <span style="color: #ff6347;">q</span>;
    q.push({sg.y, sg.x, 0});
    vis[sg.y][sg.x] = <span style="color: #8ae234;">true</span>;
    <span style="color: #729fcf; font-weight: bold;">while</span>(!q.empty()) {
        <span style="color: #8ae234; font-weight: bold;">Node</span> <span style="color: #ff6347;">cur</span> = q.front();
        q.pop();
        <span style="color: #729fcf; font-weight: bold;">if</span> (cur.y == 0 || cur.y == H-1 || cur.x == 0 || cur.x == W-1) {
            <span style="color: #729fcf; font-weight: bold;">return</span> cur.dist + 1;
        } 
        <span style="color: #729fcf; font-weight: bold;">for</span>(<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">i</span>=0;i&lt;4;i++) {
            <span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">ny</span> = cur.y + dy[i];
            <span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">nx</span> = cur.x + dx[i];

            <span style="color: #729fcf; font-weight: bold;">if</span> (safe(ny, nx) &amp;&amp; a[ny][nx] != <span style="color: #ad7fa8; font-style: italic;">'#'</span>) {
                <span style="color: #729fcf; font-weight: bold;">if</span> (f_vis[ny][nx] &gt; cur.dist + 1 &amp;&amp; vis[ny][nx] == <span style="color: #8ae234;">false</span>) {
                    vis[ny][nx] = <span style="color: #8ae234;">true</span>;
                    q.push({ny, nx, cur.dist + 1});
                }
            }
        }
    }
    <span style="color: #729fcf; font-weight: bold;">return</span> -1;
}


<span style="color: #8ae234; font-weight: bold;">void</span> <span style="color: #edd400; font-weight: bold;">init</span>(<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">W</span>, <span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">H</span>)
{
    <span style="color: #729fcf; font-weight: bold;">for</span>(<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">i</span>=0;i&lt;H;i++) {
        <span style="color: #729fcf; font-weight: bold;">for</span>(<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">j</span>=0;j&lt;W;j++) {
            f_vis[i][j] = 0;
            vis[i][j] = <span style="color: #8ae234;">false</span>;
        }
    }
    fire.clear();
}

<span style="color: #8ae234; font-weight: bold;">void</span> <span style="color: #edd400; font-weight: bold;">solve</span>()
{
    scanf(<span style="color: #ad7fa8; font-style: italic;">"%d %d"</span>, &amp;W, &amp;H);
    init(W, H);

    <span style="color: #729fcf; font-weight: bold;">for</span>(<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">i</span>=0;i&lt;H;i++) {
        scanf(<span style="color: #ad7fa8; font-style: italic;">"%s"</span>, str);
        <span style="color: #729fcf; font-weight: bold;">for</span>(<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">j</span>=0;str[j];j++) {
            a[i][j] = str[j]; 

            <span style="color: #729fcf; font-weight: bold;">if</span> (a[i][j] == <span style="color: #ad7fa8; font-style: italic;">'@'</span>) {
                sg.y = i;
                sg.x = j;
            } <span style="color: #729fcf; font-weight: bold;">else</span> <span style="color: #729fcf; font-weight: bold;">if</span> (a[i][j] == <span style="color: #ad7fa8; font-style: italic;">'*'</span>) {
                fire.push_back({i, j, 0});
            }
            f_vis[i][j] = 987654321;
        }
    }

    bfs_f();
    <span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">ans</span> = bfs_sg();
    <span style="color: #729fcf; font-weight: bold;">if</span> (ans == -1)
        printf(<span style="color: #ad7fa8; font-style: italic;">"IMPOSSIBLE\n"</span>);
    <span style="color: #729fcf; font-weight: bold;">else</span>
        printf(<span style="color: #ad7fa8; font-style: italic;">"%d\n"</span>, ans);
}

<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #edd400; font-weight: bold;">main</span>(<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">argc</span>, <span style="color: #8ae234; font-weight: bold;">char</span>* <span style="color: #ff6347;">argv</span>[])
{
    scanf(<span style="color: #ad7fa8; font-style: italic;">"%d"</span>, &amp;T);
    <span style="color: #729fcf; font-weight: bold;">for</span>(<span style="color: #8ae234; font-weight: bold;">int</span> <span style="color: #ff6347;">tc</span>=1;tc&lt;=T;tc++) {
        solve();
    }
    <span style="color: #729fcf; font-weight: bold;">return</span> 0;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org71c4b55" class="outline-2">
<h2 id="org71c4b55">문제 링크</h2>
<div class="outline-text-2" id="text-org71c4b55">
<ul class="org-ul">
<li><a href="https://www.acmicpc.net/problem/5427">https://www.acmicpc.net/problem/5427</a></li>
</ul>
</div>
</div>
